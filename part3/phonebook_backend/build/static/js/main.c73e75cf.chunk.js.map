{"version":3,"sources":["components/Person.js","components/PersonForm.js","components/Filter.js","components/Notification.js","services/phonebook.js","App.js","index.js"],"names":["Person","results","delPerson","map","person","key","id","name","number","value","onClick","PersonForm","props","onSubmit","addOrUpdatePerson","newName","onChange","handleFormInput","newNumber","type","Filter","searchKey","Notification","message","errorClass","className","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","useState","persons","setPersons","setNewName","setNewNumber","setSearchKey","errorMessage","setErrorMessage","setErrorClass","useEffect","phonebookservice","InitialPersons","event","target","filteredResults","searchword","selectedPersons","reduce","result","toLowerCase","includes","push","updateFilteredList","preventDefault","personObject","nameMatch","find","numberMatch","undefined","setTimeout","window","confirm","returnedPerson","filter","concat","catch","error","console","log","selectedPerson","toString","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c73e75cf.chunk.js","sourcesContent":["import React from 'react'\r\nconst Person = ({results, delPerson}) => {\r\n  return (results.map(person =>\r\n    <p key={person.id}>{person.name}:{person.number} <button\r\n        name = \"delete\"\r\n        value = {person.id}\r\n        onClick={delPerson}> Delete </button></p>\r\n  ))\r\n}\r\nexport default Person\r\n","import React from 'react'\r\nconst PersonForm = (props) => {\r\n  return (\r\n    <form onSubmit={props.addOrUpdatePerson}>\r\n      <div>\r\n        <p>Name : </p>\r\n        <input\r\n          name = \"personName\"\r\n          value = {props.newName}\r\n          onChange={props.handleFormInput}/>\r\n      </div>\r\n      <div>\r\n        <p>Number : </p>\r\n        <input\r\n          name = \"personNumber\"\r\n          value = {props.newNumber}\r\n          onChange={props.handleFormInput}/>\r\n      </div>\r\n      <p></p>\r\n      <div>\r\n        <button type=\"submit\">Add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\nexport default PersonForm\r\n","import React from 'react'\r\nconst Filter = (props) => {\r\n  return (\r\n    <div>\r\n      <p>Filter names with : </p>\r\n      <input\r\n        name = \"search\"\r\n        value = {props.searchKey}\r\n        onChange={props.handleFormInput}/>\r\n    </div>\r\n  )\r\n}\r\nexport default Filter\r\n","import React from 'react'\r\nconst Notification = ({ message, errorClass }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className={errorClass}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\nexport default Notification\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\nconst del = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\nexport default {\r\n  getAll,\r\n  create,\r\n  update,\r\n  del\r\n}\r\n","import React, {\r\n  useState,\r\n  useEffect\r\n}\r\nfrom 'react'\r\nimport Person from './components/Person'\r\nimport PersonForm from './components/PersonForm'\r\nimport Filter from './components/Filter'\r\nimport Notification from './components/Notification'\r\nimport phonebookservice from './services/phonebook'\r\nimport './index.css'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [searchKey, setSearchKey] = useState('')\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n  const [errorClass, setErrorClass] = useState('success')\r\n  useEffect(() => {\r\n    phonebookservice.getAll()\r\n    .then(InitialPersons => {\r\n      setPersons(InitialPersons)\r\n    })\r\n  }, [])\r\n  const updateFilteredList = (searchword) => {\r\n    let selectedPersons = []\r\n    if(searchword !== \"\") {\r\n        selectedPersons = persons.reduce((result, person) => {\r\n        if(person.name.toLowerCase()\r\n          .includes(searchword.toLowerCase())) {\r\n          result.push(person)\r\n        }\r\n        return result\r\n      }, [])\r\n    }\r\n    return(selectedPersons)\r\n  }\r\n  const delPerson = (event) => {\r\n    event.preventDefault()\r\n    let id = event.target.value\r\n    let selectedPerson = persons.find(person=>person.id.toString()===id)\r\n    if(window.confirm(\"Delete \"+selectedPerson.name+\" ? \")){\r\n      phonebookservice.del(id)\r\n      .then(result => {\r\n        setPersons(persons.filter(person=>person.id.toString()!==id))\r\n        setErrorMessage(`${selectedPerson.name} has been deleted`)\r\n        setErrorClass('success')\r\n        setTimeout(() => {setErrorMessage(null)}, 5000)\r\n      })\r\n      .catch(error => {\r\n        setErrorMessage(`${selectedPerson.name} has already been deleted`)\r\n        console.log(error)\r\n        setErrorClass('failure')\r\n        setTimeout(() => {setErrorMessage(null)}, 5000)\r\n      })\r\n    }\r\n  }\r\n  const addOrUpdatePerson = (event) => {\r\n    event.preventDefault()\r\n    let personObject = {}\r\n    personObject[\"name\"] = newName\r\n    personObject[\"number\"] = newNumber\r\n    let nameMatch = persons.find((person) => person.name === newName)\r\n    let numberMatch = persons.find((person) => person.number === newNumber)\r\n    if(nameMatch!==undefined && numberMatch!==undefined)\r\n    {\r\n      setErrorMessage(`${nameMatch.name} are ${numberMatch.number} already added to phonebook`)\r\n      setErrorClass('error')\r\n      setTimeout(() => {setErrorMessage(null)}, 5000)\r\n    }\r\n    else if(nameMatch===undefined && numberMatch!==undefined)\r\n    {\r\n      setErrorMessage(`${numberMatch.number} is already added to phonebook under ${numberMatch.name}`)\r\n      setErrorClass('error')\r\n      setTimeout(() => {setErrorMessage(null)}, 5000)\r\n    }\r\n    else if(nameMatch!==undefined && numberMatch===undefined)\r\n    {\r\n      if(window.confirm(`${nameMatch.name} is already added to phonebook, would you like to update the phone number?`))\r\n      {\r\n        phonebookservice.update(nameMatch.id, personObject)\r\n          .then(returnedPerson => {\r\n            setPersons(persons.filter(person=>person.id!==nameMatch.id).concat(returnedPerson))\r\n            setNewName('')\r\n            setNewNumber('')\r\n            setErrorMessage(`${nameMatch.name} has been updated`)\r\n            setErrorClass('success')\r\n            setTimeout(() => {setErrorMessage(null)}, 5000)\r\n          })\r\n          .catch(error => {\r\n            console.log(error)\r\n            setErrorMessage(`could not update ${nameMatch.name}`)\r\n            setErrorClass('failure')\r\n            setTimeout(() => {setErrorMessage(null)}, 5000)\r\n          })\r\n      }\r\n    }\r\n    else\r\n    {\r\n      phonebookservice.create(personObject)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setErrorMessage(newName +` has been added`)\r\n          setErrorClass('success')\r\n          setTimeout(() => {setErrorMessage(null)}, 5000)\r\n        })\r\n    }\r\n  }\r\n  const handleFormInput = (event) => {\r\n    switch (event.target.name) {\r\n      case \"personName\":\r\n        setNewName(event.target.value)\r\n        break;\r\n      case \"personNumber\":\r\n        setNewNumber(event.target.value)\r\n        break;\r\n      case \"search\":\r\n        setSearchKey(event.target.value)\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  const filteredResults = updateFilteredList(searchKey)\r\n  return (\r\n    < div >\r\n      < h2 > Phonebook < /h2>\r\n      <Notification message={errorMessage} errorClass={errorClass} />\r\n      < Filter\r\n        searchKey = { searchKey }\r\n        handleFormInput = { handleFormInput }\r\n      />\r\n      < h3 > Add New < /h3 >\r\n      < PersonForm\r\n        addOrUpdatePerson = { addOrUpdatePerson }\r\n        newName = { newName }\r\n        newNumber = { newNumber }\r\n        handleFormInput = { handleFormInput }\r\n        />\r\n      < h3 > Numbers < /h3 >\r\n      < Person\r\n        results = { filteredResults }\r\n        delPerson = { delPerson }\r\n        />\r\n    < /div >\r\n  )\r\n}\r\nexport default App\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n"],"sourceRoot":""}